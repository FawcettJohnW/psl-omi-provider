%Variables
SHORT_NAME: 'psrp'
LONG_NAME: 'PowerShell Remoting Protocol'
SHELL_HEADER: '#!/bin/sh'
SHORT_NAME_PREFIX: 'MSFT'
VENDOR: 'OpenGroup'
GROUP: 'OpenGroup'
LICENSE: 'OpenGroup'
MAINTAINER: 'The Open Group'
PROVIDES: 'psrppackage'
DESCRIPTION: 'PowerShell Remoting Protocol provider'
COPYRIGHT_FILE: 'Copyright OpenGroup'
HPUX_COPYRIGHT: 'Copyright OpenGroup'
ROOT_GROUP_NAME: 'root'
SHLIB_EXT: 'so'

%Files
/opt/omi/lib/libpsrpomiprov.${{SHLIB_EXT}};   /opt/omi-1.0.8/lib/libpsrpomiprov.${{SHLIB_EXT}};           755; root; ${{ROOT_GROUP_NAME}}
/etc/opt/omi/conf/omiregister/interop/psrpomiprov.reg; /opt/omi-1.0.8/etc/omiregister/interop/psrpomiprov.reg; 755; root; ${{ROOT_GROUP_NAME}}

%Directories
/opt;                                    755; root; ${{ROOT_GROUP_NAME}}; sysdir
/opt/omi;                                755; root; ${{ROOT_GROUP_NAME}}; sysdir
/opt/omi/lib;                            755; root; ${{ROOT_GROUP_NAME}}; sysdir
/etc/opt;                                755; root; ${{ROOT_GROUP_NAME}}; sysdir
/etc/opt/omi;                            755; root; ${{ROOT_GROUP_NAME}}; sysdir
/etc/opt/omi/conf;                       755; root; ${{ROOT_GROUP_NAME}}; sysdir
/etc/opt/omi/conf/omiregister;           755; root; ${{ROOT_GROUP_NAME}}; sysdir
/etc/opt/omi/conf/omiregister/interop;   755; root; ${{ROOT_GROUP_NAME}}; sysdir

%Links

%Dependencies

%Preinstall_0
${{SHELL_HEADER}}
%Postinstall_0
${{SHELL_HEADER}}
%Preuninstall_0
${{SHELL_HEADER}}
%Postuninstall_0
${{SHELL_HEADER}}
rm -rf /var/opt/omi/run/omiserver.sock

%Postinstall_10
/opt/omi/bin/service_control restart

%Preuninstall_100
/opt/omi/bin/service_control stop

%Postuninstall_100
/opt/omi/bin/service_control start
